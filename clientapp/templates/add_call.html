{% extends "home.html" %}

{% block title %}{% if call %}Edit Call{% else %}Add Call{% endif %} | Client Monitoring System{% endblock %}

{% block content %}
<style>
  .form-container {
    background-color: #fff;
    padding: 25px;
    border-radius: 8px;
    max-width: 800px;
    margin: auto;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  h2 {
    text-align: center;
    margin-bottom: 30px;
  }

  .form-row {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
  }

  .form-row label {
    flex: 1;
    font-weight: bold;
  }

  .form-row input,
  .form-row select,
  .form-row textarea {
    flex: 2;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  .form-buttons {
    margin-top: 30px;
    text-align: center;
  }

  .form-buttons button {
    padding: 10px 20px;
    border: none;
    margin-right: 10px;
    border-radius: 4px;
    cursor: pointer;
  }

  .submit-btn {
    background-color: #2ecc71;
    color: white;
  }

  .cancel-btn {
    background-color: #e74c3c;
    color: white;
  }

  textarea {
    resize: vertical;
  }
</style>

<div class="form-container">
  <form method="post" action="">
    {% csrf_token %}
    <h2>{% if call %}Edit Call{% else %}Add Call{% endif %}</h2>

    <div class="form-row">
      <label for="client_name">Client Name:</label>
      <input type="text" id="client_name" name="client_name" value="{{ call.client_name|default:'' }}" required>
    </div>

    <div class="form-row">
      <label for="date">Date:</label>
      <input type="date" id="date" name="date" value="{{ call.date|date:'Y-m-d'|default:'' }}" required>
    </div>

    <div class="form-row">
      <label for="subject">Subject:</label>
      <input type="text" id="subject" name="subject" value="{{ call.subject|default:'' }}" required>
    </div>

    <div class="form-row">
      <label for="reported_by">Reported By:</label>
      <input type="text" id="reported_by" name="reported_by" value="{{ call.reported_by|default:'' }}" required>
    </div>

    <div class="form-row">
      <label for="responded_by">Responded By:</label>
      <input type="text" id="responded_by" name="responded_by" value="{{ call.responded_by|default:'' }}">
    </div>

    <div class="form-row">
      <label for="status">Status:</label>
      <select id="status" name="status" required>
        <option value="">-- Select Status --</option>
        <option value="Pending" {% if call.status == 'Pending' %}selected{% endif %}>Pending</option>
        <option value="Closed" {% if call.status == 'Closed' %}selected{% endif %}>Closed</option>
      </select>
    </div>

    <div class="form-row">
      <label for="time_taken">Time Taken (hours):</label>
     <input type="number" name="time_taken" step="any" class="form-control">
    </div>

    <div class="form-row">
      <label for="solved_by">Solved By:</label>
      <input type="text" id="solved_by" name="solved_by" value="{{ call.solved_by|default:'' }}">
    </div>

    <div class="form-row">
      <label for="description">Description:</label>
      <textarea id="description" name="description" rows="3">{{ call.description|default:'' }}</textarea>
    </div>

    <div class="form-buttons">
      <button type="submit" class="submit-btn">{% if call %}Submit{% else %}Submit{% endif %}</button>
      <button type="button" class="cancel-btn" onclick='document.location.href="/clientapp/callhistory/"'>Cancel</button>
    </div>
  </form>
</div>
{% endblock %}

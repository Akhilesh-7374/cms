{% extends "home.html" %}

{% block title %}All Payments{% endblock %}

{% block content %}
  <h2 style="text-align: center; margin-top: 40px;">All Payments</h2>

  {% if payments %}
    <table border="1" cellpadding="8" cellspacing="1" align="center" width="95%">
    <thead style="background-color:orange">
        <tr>
          <th>ID</th>
          <th>Client Name</th>
          <th>Payment Mode</th>
          <th>Paid On</th>
          <th>Amount (₹)</th>
          <th>Paid To</th>
          <th>Transaction ID</th>
          <th>Description</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        {% for payment in payments %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ payment.client.client_name }}</td>
          <td>{{ payment.payment_mode }}</td>
          <td>{{ payment.paid_on }}</td>
          <td>₹{{ payment.paid_amount }}</td>
          <td>{{ payment.paid_to }}</td>
          <td>{{ payment.transaction_id }}</td>
          <td>{{ payment.description|default:"-" }}</td>
          <td>
            <a href="{% url 'edit_payment' payment.id %}">
              <button type="button">Edit</button>
            </a>
          </td>
          <td>
            <form method="post" action="{% url 'deletepayment' payment.id %}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this payment?');">
              {% csrf_token %}
              <button type="submit">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p style="text-align:center; margin-top: 30px; color:gray;">No payment records found.</p>
  {% endif %}

  <br><br>
  <center>
    <a href="{% url 'Homepage' %}"><button type="button">Back</button></a>
  </center>
{% endblock %}
